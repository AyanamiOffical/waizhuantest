var z=Object.defineProperty;var M=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var I=(o,a,e)=>a in o?z(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,w=(o,a)=>{for(var e in a||(a={}))C.call(a,e)&&I(o,e,a[e]);if(M)for(var e of M(a))E.call(a,e)&&I(o,e,a[e]);return o};var y=(o,a,e)=>new Promise((s,r)=>{var i=l=>{try{t(e.next(l))}catch(f){r(f)}},m=l=>{try{t(e.throw(l))}catch(f){r(f)}},t=l=>l.done?s(l.value):Promise.resolve(l.value).then(i,m);t((e=e.apply(o,a)).next())});import{ao as O,az as W,aq as V,dh as U,b5 as q,d6 as Z,ap as L,at as j}from"./bootstrap-BWmjjFp9.js";import{_ as D}from"./login.vue_vue_type_script_setup_true_lang-7DJzcswy.js";import{O as b,an as J,a9 as Q,n as F,aN as H,V as S,bd as X,be as G,Q as $,J as k,ak as K,_ as A,x as p,$ as g,U as n,X as Y,bJ as ee,aP as N,Z as ae}from"../jse/index-index-DuhpPpLg.js";import{_ as te,a as oe,N as se,b as ne,c as re}from"./layout.vue_vue_type_script_setup_true_lang-D36g76FA.js";import{u as le}from"./use-modal-CjlieS99.js";import"./captcha-CkwysULF.js";import"./oauthProvider-ilaFJzyB.js";import"./index-BqPUBnbf.js";import"./auth-title-BVzbub5R.js";import"./use-vben-form-67dA5BCn.js";import"./index-Cy4jNNSy.js";import"./render-content.vue_vue_type_script_lang-CRSyYege.js";import"./theme-toggle.vue_vue_type_script_setup_true_lang-DnGC0-IL.js";import"./TabsList.vue_vue_type_script_setup_true_lang-CV-RZ37h.js";import"./rotate-cw-DY0D8Eik.js";const ie=O("BookOpenTextIcon",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]),d=b(),P=b(!1),_=b({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function ue(){function o(s){return y(this,null,function*(){var i;const{Watermark:r}=yield H(()=>y(this,null,function*(){const{Watermark:m}=yield import("./index.esm-ChtR6blK.js");return{Watermark:m}}),[]);_.value=w(w({},_.value),s),d.value=new r(_.value),yield(i=d.value)==null?void 0:i.create()})}function a(s){return y(this,null,function*(){var r;d.value?(yield F(),yield(r=d.value)==null?void 0:r.changeOptions(w(w({},_.value),s))):yield o(s)})}function e(){d.value&&(d.value.destroy(),d.value=void 0)}return P.value||(P.value=!0,J(()=>{e()})),{destroyWatermark:e,updateWatermark:a,watermark:Q(d)}}const ce=S({name:"LoginExpiredModal",__name:"login-expired-modal",props:X({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},thirdPartyProviderList:{},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=o,e=G(o,"open"),[s,r]=le();$(()=>e.value,t=>{r.setState({isOpen:t})});const i=k(()=>a.zIndex||m());function m(){let t=0;return[...document.querySelectorAll("*")].forEach(f=>{const h=window.getComputedStyle(f).getPropertyValue("z-index");h&&!Number.isNaN(Number.parseInt(h))&&(t=Math.max(t,Number.parseInt(h)))}),t+1}return(t,l)=>(A(),K("div",null,[p(n(s),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":i.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:g(()=>[p(n(te),{src:t.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),p(n(W),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":t.$t("authentication.loginAgainSubTitle"),title:t.$t("authentication.loginAgainTitle")},{default:g(()=>[Y(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),Le=S({__name:"basic",setup(o){const a=V(),e=b([{avatar:"https://avatar.vercel.sh/vercel.svg?text=VB",date:"3小时前",isRead:!0,message:"描述信息描述信息描述信息",title:"收到了 14 份新周报"},{avatar:"https://avatar.vercel.sh/1",date:"刚刚",isRead:!1,message:"描述信息描述信息描述信息",title:"朱偏右 回复了你"},{avatar:"https://avatar.vercel.sh/1",date:"2024-01-01",isRead:!1,message:"描述信息描述信息描述信息",title:"曲丽丽 评论了你"},{avatar:"https://avatar.vercel.sh/satori",date:"1天前",isRead:!1,message:"描述信息描述信息描述信息",title:"代办提醒"}]),s=U(),r=q(),i=Z(),{destroyWatermark:m,updateWatermark:t}=ue(),l=k(()=>e.value.some(u=>!u.isRead)),f=k(()=>[{handler:()=>{ee(j,{target:"_blank"})},icon:ie,text:L("ui.widgets.document")},{handler:()=>{a.push("/profile")},icon:"ant-design:profile-outlined",text:L("sys.user.profile")}]),x=k(()=>{var u,c;return(c=(u=s.userInfo)==null?void 0:u.avatar)!=null?c:N.app.defaultAvatar});function h(){return y(this,null,function*(){yield r.logout(!1)})}function R(){e.value=[]}function T(){e.value.forEach(u=>u.isRead=!0)}return $(()=>N.app.watermark,u=>y(this,null,function*(){var c,v;u?yield t({content:`${(c=s.userInfo)==null?void 0:c.username} - ${(v=s.userInfo)==null?void 0:v.realName}`}):m()}),{immediate:!0}),(u,c)=>(A(),ae(n(re),{onClearPreferencesAndLogout:h},{"user-dropdown":g(()=>{var v,B;return[p(n(ne),{avatar:x.value,description:(v=n(s).userInfo)==null?void 0:v.departmentName,menus:f.value,"tag-text":n(s).userRoles.join(","),text:(B=n(s).userInfo)==null?void 0:B.realName,onLogout:h},null,8,["avatar","description","menus","tag-text","text"])]}),notification:g(()=>[p(n(se),{dot:l.value,notifications:e.value,onClear:R,onMakeAll:T},null,8,["dot","notifications"])]),extra:g(()=>[p(n(ce),{open:n(i).loginExpired,"onUpdate:open":c[0]||(c[0]=v=>n(i).loginExpired=v),avatar:x.value},{default:g(()=>[p(D)]),_:1},8,["open","avatar"])]),"lock-screen":g(()=>[p(n(oe),{avatar:x.value,onToLogin:h},null,8,["avatar"])]),_:1}))}});export{Le as default};
