var f=(s,m,n)=>new Promise((c,u)=>{var p=t=>{try{i(n.next(t))}catch(o){u(o)}},d=t=>{try{i(n.throw(t))}catch(o){u(o)}},i=t=>t.done?c(t.value):Promise.resolve(t.value).then(p,d);i((n=n.apply(s,m)).next())});import{u as k}from"./form-Cza2qOOy.js";import{u as y,c as v}from"./position-TWWdIT-s.js";import{ap as e,bp as N}from"./bootstrap-D7b_84de.js";import{s as r,n as _}from"./use-vben-form-BpU-Ov5A.js";import{k as g,V as I,O as b,Z as C,_ as F,$ as S,x as A,U as x}from"../jse/index-index-DpiZBZ8E.js";import D from"./index-m0N9Py6F.js";import{u as P}from"./use-modal-cKW3u1UH.js";const j={columns:[{type:"checkbox",width:60},{title:e("sys.position.name"),field:"trans"},{title:e("sys.position.code"),field:"code"},{title:e("common.remark"),field:"remark"},{title:e("common.sort"),field:"sort"},{title:e("common.status"),field:"status",slots:{default:s=>g(D,{checked:s.row.status===1,onClick:()=>{const m=s.row.status===1?2:1;y({id:s.row.id,status:m}).then(()=>{s.row.status=m})}})}},{title:e("common.createTime"),field:"createdAt",formatter:"formatDateTime"}]},q={schema:[{fieldName:"name",label:e("sys.position.name"),component:"Input",rules:r().max(50).optional()},{fieldName:"code",label:e("sys.position.code"),component:"Input",rules:r().max(20).optional()},{fieldName:"remark",label:e("common.remark"),component:"Input",rules:r().max(200).optional()}]},V={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{fieldName:"name",label:e("sys.position.name"),component:"Input",rules:r().max(50)},{fieldName:"code",label:e("sys.position.code"),component:"Input",rules:r().max(20)},{fieldName:"remark",label:e("common.remark"),component:"Input",rules:r().max(200)},{fieldName:"sort",label:e("common.sort"),component:"InputNumber",rules:_().max(1e4)},{fieldName:"status",label:e("common.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:e("common.on"),value:1},{label:e("common.off"),value:2}]}}]},z=I({name:"PositionForm",__name:"form",setup(s,{expose:m}){const n=b(),c=b(!1),u=b();function p(a){return f(this,null,function*(){const l=c.value?yield y(a):yield v(a);l.code===0&&(N.success(l.msg),u.value.reload())})}const[d,i]=k({handleSubmit:p,schema:[...V.schema],showDefaultActions:!1}),[t,o]=P({fullscreenButton:!1,onCancel(){o.close()},onConfirm:()=>f(this,null,function*(){(yield i.validate()).valid&&(yield i.submitForm(),o.close())}),onOpenChange(a){var l,h,w;c.value=(l=o.getData())==null?void 0:l.isUpdate,n.value=a?((h=o.getData())==null?void 0:h.record)||{}:{},u.value=a?(w=o.getData())==null?void 0:w.gridApi:null,a&&i.setValues(n.value),o.setState({title:c.value?e("sys.position.editPosition"):e("sys.position.addPosition")})}});return m(o),(a,l)=>(F(),C(x(t),null,{default:S(()=>[A(x(d))]),_:1}))}});export{z as _,q as s,j as t};
