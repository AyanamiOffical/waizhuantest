var f=(s,l,m)=>new Promise((c,i)=>{var u=t=>{try{n(m.next(t))}catch(a){i(a)}},d=t=>{try{n(m.throw(t))}catch(a){i(a)}},n=t=>t.done?c(t.value):Promise.resolve(t.value).then(u,d);n((m=m.apply(s,l)).next())});import{u as v}from"./form-BY5gWF-X.js";import{u as w,c as k}from"./fileTag-_R53j_EG.js";import{ap as e,bp as _}from"./bootstrap-DXVvTFoS.js";import{k as F,V as C,O as p,Z as N,_ as S,$ as T,x,U as b}from"../jse/index-index-BpfZjsfB.js";import A from"./index-CxJQESyl.js";import{u as D}from"./use-modal-DdHEjpwi.js";const q={columns:[{type:"checkbox",width:60},{title:e("fms.tag.name"),field:"name"},{title:e("common.remark"),field:"remark"},{title:e("common.status"),field:"status",slots:{default:s=>F(A,{checked:s.row.status===1,onClick:()=>{const l=s.row.status===1?2:1;w({id:s.row.id,status:l}).then(()=>{s.row.status=l})}})}},{title:e("common.createTime"),field:"createdAt",formatter:"formatDateTime"}]},G={schema:[{fieldName:"name",label:e("fms.tag.name"),component:"Input"},{fieldName:"remark",label:e("common.remark"),component:"Input"}]},I={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{fieldName:"name",label:e("fms.tag.name"),component:"Input",rules:"required"},{fieldName:"remark",label:e("common.remark"),component:"Input"},{fieldName:"status",label:e("common.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:e("common.on"),value:1},{label:e("common.off"),value:2}]}}]},P=C({name:"FileTagForm",__name:"form",setup(s,{expose:l}){const m=p(),c=p(!1),i=p();function u(o){return f(this,null,function*(){const r=c.value?yield w(o):yield k(o);r.code===0&&(_.success(r.msg),i.value.reload())})}const[d,n]=v({handleSubmit:u,schema:[...I.schema],showDefaultActions:!1,layout:"vertical"}),[t,a]=D({fullscreenButton:!1,onCancel(){a.close()},onConfirm:()=>f(this,null,function*(){(yield n.validate()).valid&&(yield n.submitForm(),a.close())}),onOpenChange(o){var r,g,h;c.value=(r=a.getData())==null?void 0:r.isUpdate,m.value=o?((g=a.getData())==null?void 0:g.record)||{}:{},i.value=o?(h=a.getData())==null?void 0:h.gridApi:null,o&&n.setValues(m.value),a.setState({title:c.value?e("fms.tag.editTag"):e("fms.tag.addTag")})}});return l(a),(o,r)=>(S(),N(b(t),null,{default:T(()=>[x(b(d))]),_:1}))}});export{P as _,G as s,q as t};
