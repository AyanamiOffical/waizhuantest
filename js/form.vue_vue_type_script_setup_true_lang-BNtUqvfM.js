var m=(f,i,s)=>new Promise((l,n)=>{var c=e=>{try{o(s.next(e))}catch(a){n(a)}},u=e=>{try{o(s.throw(e))}catch(a){n(a)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(c,u);o((s=s.apply(f,i)).next())});import{u as h}from"./form-Cza2qOOy.js";import{d as g,u as b,c as w}from"./schemas-Ba4-1zdr.js";import{ap as _,bp as x}from"./bootstrap-D7b_84de.js";import{V as y,O as d,Z as A,_ as C,$ as F,x as T,U as k}from"../jse/index-index-DpiZBZ8E.js";import{u as V}from"./use-modal-cKW3u1UH.js";const $=y({name:"TaskForm",__name:"form",setup(f,{expose:i}){const s=d(),l=d(!1),n=d();function c(t){return m(this,null,function*(){const r=l.value?yield b(t):yield w(t);r.code===0&&(x.success(r.msg),n.value.reload())})}const[u,o]=h({handleSubmit:c,schema:[...g.schema],showDefaultActions:!1,layout:"vertical"}),[e,a]=V({fullscreenButton:!1,onCancel(){a.close()},onConfirm:()=>m(this,null,function*(){(yield o.validate()).valid&&(yield o.submitForm(),a.close())}),onOpenChange(t){var r,p,v;l.value=(r=a.getData())==null?void 0:r.isUpdate,s.value=t?((p=a.getData())==null?void 0:p.record)||{}:{},n.value=t?(v=a.getData())==null?void 0:v.gridApi:null,t&&o.setValues(s.value),a.setState({title:l.value?_("sys.task.editTask"):_("sys.task.addTask")})}});return i(a),(t,r)=>(C(),A(k(e),null,{default:F(()=>[T(k(u))]),_:1}))}});export{$ as _};
