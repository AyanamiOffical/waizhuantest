var p=(h,c,s)=>new Promise((r,i)=>{var u=t=>{try{n(s.next(t))}catch(a){i(a)}},d=t=>{try{n(s.throw(t))}catch(a){i(a)}},n=t=>t.done?r(t.value):Promise.resolve(t.value).then(u,d);n((s=s.apply(h,c)).next())});import{u as x}from"./form-CWWYCqXo.js";import{u as I,c as N}from"./oauthProvider-Bb_O-SwC.js";import{ap as e,bp as U}from"./bootstrap-B-VSIAtm.js";import{s as o}from"./use-vben-form-m2hWlrgt.js";import{V as _,O as f,Z as g,_ as S,$ as w,x as F,U as v}from"../jse/index-index-fT_vxJqM.js";import{u as A}from"./use-modal-BhR4F9RI.js";const O={columns:[{type:"checkbox",width:60},{title:e("common.name"),field:"name"},{title:e("sys.oauth.clientId"),field:"clientId"},{title:e("common.createTime"),field:"createdAt",formatter:"formatDateTime"}]},T={schema:[{fieldName:"name",label:e("common.name"),component:"Input",rules:o().max(30).optional()}]},C={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{fieldName:"name",label:e("common.name"),component:"Input",rules:o().max(30)},{fieldName:"clientId",label:e("sys.oauth.clientId"),component:"Input",rules:o().max(80)},{fieldName:"clientSecret",label:e("sys.oauth.clientSecret"),component:"Input",rules:o().max(100)},{fieldName:"redirectUrl",label:e("sys.oauth.redirectURL"),component:"Input",rules:o().max(300)},{fieldName:"scopes",label:e("sys.oauth.scope"),component:"Input",rules:o().max(100)},{fieldName:"authUrl",label:e("sys.oauth.authURL"),component:"Input",rules:o().max(300)},{fieldName:"tokenUrl",label:e("sys.oauth.tokenURL"),component:"Input",rules:o().max(300)},{fieldName:"infoUrl",label:e("sys.oauth.infoURL"),component:"Input",rules:o().max(300)},{fieldName:"authStyle",label:e("sys.oauth.authStyle"),component:"Select",componentProps:{options:[{label:e("sys.oauth.params"),value:1},{label:e("sys.oauth.header"),value:2}],class:"w-full"}}]},M=_({name:"OauthProviderForm",__name:"form",setup(h,{expose:c}){const s=f(),r=f(!1),i=f();function u(l){return p(this,null,function*(){const m=r.value?yield I(l):yield N(l);m.code===0&&(U.success(m.msg),i.value.reload())})}const[d,n]=x({handleSubmit:u,schema:[...C.schema],showDefaultActions:!1,layout:"vertical"}),[t,a]=A({fullscreenButton:!1,onCancel(){a.close()},onConfirm:()=>p(this,null,function*(){(yield n.validate()).valid&&(yield n.submitForm(),a.close())}),onOpenChange(l){var m,b,y;r.value=(m=a.getData())==null?void 0:m.isUpdate,s.value=l?((b=a.getData())==null?void 0:b.record)||{}:{},i.value=l?(y=a.getData())==null?void 0:y.gridApi:null,l&&n.setValues(s.value),a.setState({title:r.value?e("sys.oauth.editProvider"):e("sys.oauth.addProvider")})}});return c(a),(l,m)=>(S(),g(v(t),null,{default:w(()=>[F(v(d))]),_:1}))}});export{M as _,T as s,O as t};
