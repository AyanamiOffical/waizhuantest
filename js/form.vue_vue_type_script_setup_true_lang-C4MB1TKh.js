var f=(l,n,s)=>new Promise((c,u)=>{var r=t=>{try{m(s.next(t))}catch(a){u(a)}},d=t=>{try{m(s.throw(t))}catch(a){u(a)}},m=t=>t.done?c(t.value):Promise.resolve(t.value).then(r,d);m((s=s.apply(l,n)).next())});import{u as T}from"./form-BY5gWF-X.js";import{u as b,c as w}from"./cloudFileTag-BsA6Kd3S.js";import{ap as e,bp as v}from"./bootstrap-DXVvTFoS.js";import{k,V as C,O as p,Z as _,_ as N,$ as S,x,U as h}from"../jse/index-index-BpfZjsfB.js";import A from"./index-CxJQESyl.js";import{u as D}from"./use-modal-DdHEjpwi.js";const G={columns:[{type:"checkbox",width:60},{title:e("fms.cloudFileTag.name"),field:"name"},{title:e("fms.cloudFileTag.remark"),field:"remark"},{title:e("common.status"),field:"status",slots:{default:l=>k(A,{checked:l.row.status===1,onClick:()=>{const n=l.row.status===1?2:1;b({id:l.row.id,status:n}).then(()=>{l.row.status=n})}})}},{title:e("common.createTime"),field:"createdAt",formatter:"formatDateTime"}]},P={schema:[{fieldName:"name",label:e("fms.cloudFileTag.name"),component:"Input"},{fieldName:"remark",label:e("fms.cloudFileTag.remark"),component:"Input"}]},I={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{fieldName:"name",label:e("fms.cloudFileTag.name"),component:"Input"},{fieldName:"remark",label:e("fms.cloudFileTag.remark"),component:"Input"},{fieldName:"status",label:e("fms.cloudFileTag.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:e("common.on"),value:1},{label:e("common.off"),value:2}]}}]},Z=C({name:"CloudFileTagForm",__name:"form",setup(l,{expose:n}){const s=p(),c=p(!1),u=p();function r(o){return f(this,null,function*(){const i=c.value?yield b(o):yield w(o);i.code===0&&(v.success(i.msg),u.value.reload())})}const[d,m]=T({handleSubmit:r,schema:[...I.schema],showDefaultActions:!1,layout:"vertical"}),[t,a]=D({fullscreenButton:!1,onCancel(){a.close()},onConfirm:()=>f(this,null,function*(){(yield m.validate()).valid&&(yield m.submitForm(),a.close())}),onOpenChange(o){var i,g,F;c.value=(i=a.getData())==null?void 0:i.isUpdate,s.value=o?((g=a.getData())==null?void 0:g.record)||{}:{},u.value=o?(F=a.getData())==null?void 0:F.gridApi:null,o&&m.setValues(s.value),a.setState({title:c.value?e("fms.cloudFileTag.editCloudFileTag"):e("fms.cloudFileTag.addCloudFileTag")})}});return n(a),(o,i)=>(N(),_(h(t),null,{default:S(()=>[x(h(d))]),_:1}))}});export{Z as _,P as s,G as t};
