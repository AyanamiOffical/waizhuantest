var p=(s,n,l)=>new Promise((u,i)=>{var c=o=>{try{r(l.next(o))}catch(a){i(a)}},d=o=>{try{r(l.throw(o))}catch(a){i(a)}},r=o=>o.done?u(o.value):Promise.resolve(o.value).then(c,d);r((l=l.apply(s,n)).next())});import{u as v}from"./form-CWWYCqXo.js";import{u as w,c as N}from"./role-mYFWjIOr.js";import{ap as e,bp as g}from"./bootstrap-B-VSIAtm.js";import{n as R}from"./use-vben-form-m2hWlrgt.js";import{k as _,V,O as f,Z as k,_ as I,$ as x,x as C,U as y}from"../jse/index-index-fT_vxJqM.js";import F from"./index-BMZQRmWB.js";import{u as S}from"./use-modal-BhR4F9RI.js";const G={columns:[{type:"checkbox",width:60},{title:e("sys.role.roleName"),field:"trans"},{title:e("sys.role.roleValue"),field:"code"},{title:e("common.status"),field:"status",slots:{default:s=>_(F,{checked:s.row.status===1,onClick:()=>{const n=s.row.status===1?2:1;w({id:s.row.id,status:n}).then(()=>{s.row.status=n})}})}},{title:e("common.createTime"),field:"createdAt",formatter:"formatDateTime"}]},P={schema:[{fieldName:"name",label:e("sys.role.roleName"),component:"Input"}]},A={schema:[{fieldName:"id",label:"ID",component:"Input",dependencies:{show:!1,triggerFields:["id"]}},{fieldName:"name",label:e("sys.role.roleName"),component:"Input",rules:"required"},{fieldName:"code",label:e("sys.role.roleValue"),component:"Input",rules:"required",help:e("sys.role.roleValueHelpMessage")},{fieldName:"defaultRouter",label:e("sys.role.defaultRouter"),component:"Input",rules:"required",help:e("sys.role.defaultRouterHelpMessage")},{fieldName:"remark",label:e("common.remark"),component:"Input"},{fieldName:"sort",label:e("sys.menu.order"),component:"InputNumber",rules:R().max(1e4).min(1)},{fieldName:"status",label:e("common.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:e("common.on"),value:1},{label:e("common.off"),value:2}]}}]},Z=V({name:"RoleForm",__name:"form",setup(s,{expose:n}){const l=f(),u=f(!1),i=f();function c(t){return p(this,null,function*(){const m=u.value?yield w(t):yield N(t);m.code===0&&(g.success(m.msg),i.value.reload())})}const[d,r]=v({handleSubmit:c,schema:[...A.schema],showDefaultActions:!1,layout:"vertical"}),[o,a]=S({fullscreenButton:!1,onCancel(){a.close()},onConfirm:()=>p(this,null,function*(){(yield r.validate()).valid&&(yield r.submitForm(),a.close())}),onOpenChange(t){var m,h,b;u.value=(m=a.getData())==null?void 0:m.isUpdate,l.value=t?((h=a.getData())==null?void 0:h.record)||{}:{},i.value=t?(b=a.getData())==null?void 0:b.gridApi:null,t&&r.setValues(l.value),a.setState({title:u.value?e("sys.role.editRole"):e("sys.role.addRole")})}});return n(a),(t,m)=>(I(),k(y(o),null,{default:x(()=>[C(y(d))]),_:1}))}});export{Z as _,P as s,G as t};
