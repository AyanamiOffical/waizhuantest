var O=Object.defineProperty;var C=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var k=(a,o,e)=>o in a?O(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e,D=(a,o)=>{for(var e in o||(o={}))A.call(o,e)&&k(a,e,o[e]);if(C)for(var e of C(o))F.call(o,e)&&k(a,e,o[e]);return a};var h=(a,o,e)=>new Promise((g,r)=>{var l=i=>{try{c(e.next(i))}catch(m){r(m)}},y=i=>{try{c(e.throw(i))}catch(m){r(m)}},c=i=>i.done?g(i.value):Promise.resolve(i.value).then(l,y);c((e=e.apply(a,o)).next())});import{ap as n,cf as x,aW as R,ch as U}from"./bootstrap-_LeX4-bm.js";import{r as M}from"./chunk-BZNENX2T-BoCj3v1U.js";import{_ as z,u as E}from"./TableAction.vue_vue_type_style_index_0_lang-CsfVJIMM.js";import{t as G,b as N,s as j,g as q}from"./schemas-BY1tElnl.js";import{_ as L}from"./detail.vue_vue_type_script_setup_true_lang-BQ-vRh-V.js";import{_ as P}from"./form.vue_vue_type_script_setup_true_lang-DJ6xJCdd.js";import{_ as T}from"./page.vue_vue_type_script_setup_true_lang-BrPzpsst.js";import{V as W,O as Z,k as H,Z as I,_ as J,$ as p,x as u,U as s,a5 as $,a6 as v,ar as K}from"../jse/index-index-CCysr0kX.js";import{u as w}from"./use-modal-OeyNsIFo.js";import"./index-CsuTNqdp.js";import"./form-ZuhkTVCu.js";import"./use-vben-form-BJ1BG10c.js";import"./render-content.vue_vue_type_script_lang-DcqsGKi2.js";import"./index-BaWU5ccD.js";import"./index-C_t4d1EK.js";import"./index-BA5-Djs4.js";import"./index-CkHVQXyq.js";const gt=W({name:"DictionaryManagement",__name:"index",setup(a){const[o,e]=w({connectedComponent:L}),[g,r]=w({connectedComponent:P}),l=Z(!1),y={checkboxChange(t){l.value=t.$table.getCheckboxRecords().length>0},checkboxAll(t){l.value=t.$table.getCheckboxRecords().length>0}},c={collapsed:!1,schema:[...j.schema],showCollapseButton:!0,submitOnEnter:!1},i={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...G.columns,{title:n("common.action"),fixed:"right",field:"action",slots:{default:({row:t})=>H(z,{actions:[{type:"link",tooltip:n("common.edit"),icon:"clarity:note-edit-line",onClick:b.bind(null,t)},{type:"link",color:"success",icon:"material-symbols:dictionary",tooltip:n("sys.dictionary.editDictionaryDetail"),onClick:S.bind(null,t)},{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:n("common.delete"),popConfirm:{title:n("common.deleteConfirm"),placement:"left",confirm:_.bind(null,[t.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(V,_t)=>h(this,[V,_t],function*({page:t},d){return(yield q(D({page:t.currentPage,pageSize:t.pageSize},d))).data})}}},[m,f]=E({formOptions:c,gridOptions:i,gridEvents:y});function b(t){M(t)?r.setData({record:t,isUpdate:!0,gridApi:f}):r.setData({record:null,isUpdate:!1,gridApi:f}),r.open()}function B(){U.confirm({title:n("common.deleteConfirm"),onOk(){return h(this,null,function*(){const d=f.grid.getCheckboxRecords().map(V=>V.id);_(d)})}})}function _(t){return h(this,null,function*(){(yield N({ids:t})).code===0&&(yield f.reload(),l.value=!1)})}function S(t){M(t)&&e.setData({id:t.id}),e.open()}return(t,d)=>(J(),I(s(T),{"auto-content-height":""},{default:p(()=>[u(s(g)),u(s(o)),u(s(m),null,{"toolbar-buttons":p(()=>[K(u(s(x),{danger:"",type:"primary",onClick:B},{default:p(()=>[$(v(s(n)("common.delete")),1)]),_:1},512),[[R,l.value]])]),"toolbar-tools":p(()=>[u(s(x),{type:"primary",onClick:b},{default:p(()=>[$(v(s(n)("sys.dictionary.addDictionary")),1)]),_:1})]),_:1})]),_:1}))}});export{gt as default};
