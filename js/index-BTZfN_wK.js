var w=Object.defineProperty;var _=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var k=(n,o,e)=>o in n?w(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,C=(n,o)=>{for(var e in o||(o={}))D.call(o,e)&&k(n,e,o[e]);if(_)for(var e of _(o))$.call(o,e)&&k(n,e,o[e]);return n};var u=(n,o,e)=>new Promise((s,p)=>{var h=a=>{try{c(e.next(a))}catch(l){p(l)}},g=a=>{try{c(e.throw(a))}catch(l){p(l)}},c=a=>a.done?s(a.value):Promise.resolve(a.value).then(h,g);c((e=e.apply(n,o)).next())});import{ap as i,cf as x,aW as B,ch as S}from"./bootstrap-C83mKH3e.js";import{r as V}from"./chunk-BZNENX2T-BoCj3v1U.js";import{_ as O,u as A}from"./TableAction.vue_vue_type_style_index_0_lang-Bpw2phhz.js";import{d as F,g as U}from"./memberRank-CtX9uUTv.js";import{_ as z,t as E,s as G}from"./form.vue_vue_type_script_setup_true_lang-ZMNRYu71.js";import{_ as N}from"./page.vue_vue_type_script_setup_true_lang-FRKIMBAU.js";import{V as j,O as q,k as L,Z as P,_ as T,$ as d,x as f,U as r,a5 as y,a6 as M,ar as W}from"../jse/index-index-GzxSC5Ev.js";import{u as Z}from"./use-modal-C-YiCEuI.js";import"./index-BLhXPpf9.js";import"./form-ClcOlmjz.js";import"./use-vben-form-DZ0hU62q.js";import"./render-content.vue_vue_type_script_lang-DFpFIcwM.js";import"./index-tJhkz61M.js";import"./index-BPwIrRfc.js";import"./index-B7GG6LAj.js";const me=j({name:"MemberRankManagement",__name:"index",setup(n){const[o,e]=Z({connectedComponent:z}),s=q(!1),p={checkboxChange(t){s.value=t.$table.getCheckboxRecords().length>0},checkboxAll(t){s.value=t.$table.getCheckboxRecords().length>0}},h={collapsed:!1,schema:[...G.schema],showCollapseButton:!0,submitOnEnter:!1},g={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...E.columns,{title:i("common.action"),fixed:"right",field:"action",slots:{default:({row:t})=>L(O,{actions:[{type:"link",icon:"clarity:note-edit-line",tooltip:i("common.edit"),onClick:l.bind(null,t)},{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:i("common.delete"),popConfirm:{title:i("common.deleteConfirm"),placement:"left",confirm:b.bind(null,[t.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(v,ue)=>u(this,[v,ue],function*({page:t},m){return(yield U(C({page:t.currentPage,pageSize:t.pageSize},m))).data})}}},[c,a]=A({formOptions:h,gridOptions:g,gridEvents:p});function l(t){V(t)?e.setData({record:t,isUpdate:!0,gridApi:a}):e.setData({record:null,isUpdate:!1,gridApi:a}),e.open()}function R(){S.confirm({title:i("common.deleteConfirm"),onOk(){return u(this,null,function*(){const m=a.grid.getCheckboxRecords().map(v=>v.id);b(m)})}})}function b(t){return u(this,null,function*(){(yield F({ids:t})).code===0&&(yield a.reload(),s.value=!1)})}return(t,m)=>(T(),P(r(N),{"auto-content-height":""},{default:d(()=>[f(r(o)),f(r(c),null,{"toolbar-buttons":d(()=>[W(f(r(x),{danger:"",type:"primary",onClick:R},{default:d(()=>[y(M(r(i)("common.delete")),1)]),_:1},512),[[B,s.value]])]),"toolbar-tools":d(()=>[f(r(x),{type:"primary",onClick:l},{default:d(()=>[y(M(r(i)("sys.memberRank.addMemberRank")),1)]),_:1})]),_:1})]),_:1}))}});export{me as default};
