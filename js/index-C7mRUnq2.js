var D=Object.defineProperty;var b=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var _=(n,o,e)=>o in n?D(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,k=(n,o)=>{for(var e in o||(o={}))$.call(o,e)&&_(n,e,o[e]);if(b)for(var e of b(o))B.call(o,e)&&_(n,e,o[e]);return n};var p=(n,o,e)=>new Promise((l,u)=>{var g=a=>{try{c(e.next(a))}catch(r){u(r)}},h=a=>{try{c(e.throw(a))}catch(r){u(r)}},c=a=>a.done?l(a.value):Promise.resolve(a.value).then(g,h);c((e=e.apply(n,o)).next())});import{ap as i,cf as x,aW as M,ch as S}from"./bootstrap-DXVvTFoS.js";import{r as T}from"./chunk-BZNENX2T-BoCj3v1U.js";import{_ as V,u as O}from"./TableAction.vue_vue_type_style_index_0_lang-CJNs7Aso.js";import{d as A,g as R}from"./cloudFileTag-BsA6Kd3S.js";import{_ as U,t as z,s as E}from"./form.vue_vue_type_script_setup_true_lang-C4MB1TKh.js";import{_ as G}from"./page.vue_vue_type_script_setup_true_lang-B-FBxrtp.js";import{V as N,O as j,k as q,Z as L,_ as P,$ as d,x as f,U as s,a5 as y,a6 as F,ar as W}from"../jse/index-index-BpfZjsfB.js";import{u as Z}from"./use-modal-DdHEjpwi.js";import"./index-BViELZQP.js";import"./form-BY5gWF-X.js";import"./use-vben-form-F13RO0jS.js";import"./render-content.vue_vue_type_script_lang-Dm6NPG3G.js";import"./index-BH_3AJJk.js";import"./index-CxJQESyl.js";import"./index-2RmDDPPU.js";const me=N({name:"CloudFileTagManagement",__name:"index",setup(n){const[o,e]=Z({connectedComponent:U}),l=j(!1),u={checkboxChange(t){l.value=t.$table.getCheckboxRecords().length>0},checkboxAll(t){l.value=t.$table.getCheckboxRecords().length>0}},g={collapsed:!1,schema:[...E.schema],showCollapseButton:!0,submitOnEnter:!1},h={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...z.columns,{title:i("common.action"),fixed:"right",field:"action",slots:{default:({row:t})=>q(V,{actions:[{type:"link",icon:"clarity:note-edit-line",tooltip:i("common.edit"),onClick:r.bind(null,t)},{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:i("common.delete"),popConfirm:{title:i("common.deleteConfirm"),placement:"left",confirm:C.bind(null,[t.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(w,pe)=>p(this,[w,pe],function*({page:t},m){return(yield R(k({page:t.currentPage,pageSize:t.pageSize},m))).data})}}},[c,a]=O({formOptions:g,gridOptions:h,gridEvents:u});function r(t){T(t)?e.setData({record:t,isUpdate:!0,gridApi:a}):e.setData({record:null,isUpdate:!1,gridApi:a}),e.open()}function v(){S.confirm({title:i("common.deleteConfirm"),onOk(){return p(this,null,function*(){const m=a.grid.getCheckboxRecords().map(w=>w.id);C(m)})}})}function C(t){return p(this,null,function*(){(yield A({ids:t})).code===0&&(yield a.reload(),l.value=!1)})}return(t,m)=>(P(),L(s(G),{"auto-content-height":""},{default:d(()=>[f(s(o)),f(s(c),null,{"toolbar-buttons":d(()=>[W(f(s(x),{danger:"",type:"primary",onClick:v},{default:d(()=>[y(F(s(i)("common.delete")),1)]),_:1},512),[[M,l.value]])]),"toolbar-tools":d(()=>[f(s(x),{type:"primary",onClick:r},{default:d(()=>[y(F(s(i)("fms.cloudFileTag.addCloudFileTag")),1)]),_:1})]),_:1})]),_:1}))}});export{me as default};
