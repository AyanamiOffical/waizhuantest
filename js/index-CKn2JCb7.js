var O=Object.defineProperty;var M=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var D=(s,t,o)=>t in s?O(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,$=(s,t)=>{for(var o in t||(t={}))F.call(t,o)&&D(s,o,t[o]);if(M)for(var o of M(t))R.call(t,o)&&D(s,o,t[o]);return s};var g=(s,t,o)=>new Promise((h,p)=>{var f=a=>{try{c(o.next(a))}catch(r){p(r)}},_=a=>{try{c(o.throw(a))}catch(r){p(r)}},c=a=>a.done?h(a.value):Promise.resolve(a.value).then(f,_);c((o=o.apply(s,t)).next())});import{ap as i,cf as b,aW as T,ch as U}from"./bootstrap-BWmjjFp9.js";import{r as C}from"./chunk-BZNENX2T-BoCj3v1U.js";import{_ as z,u as E}from"./TableAction.vue_vue_type_style_index_0_lang-BqLOqCja.js";import{_ as G,d as I,g as N}from"./form.vue_vue_type_script_setup_true_lang-mrg0QzM3.js";import{t as j,s as q}from"./schemas-BkjzM2_e.js";import{_ as W}from"./send-modal.vue_vue_type_script_setup_true_lang-Bd20comI.js";import{_ as Z}from"./sms-log-modal.vue_vue_type_script_setup_true_lang-CW6u3s3F.js";import{_ as H}from"./page.vue_vue_type_script_setup_true_lang-M_Vyrb2o.js";import{V as J,O as K,k as Q,Z as X,_ as Y,$ as m,x as l,U as n,a5 as k,a6 as S,ar as ee}from"../jse/index-index-DuhpPpLg.js";import{u as y}from"./use-modal-CjlieS99.js";import"./index-Cy4jNNSy.js";import"./form-CK_zT3Xn.js";import"./use-vben-form-67dA5BCn.js";import"./render-content.vue_vue_type_script_lang-CRSyYege.js";import"./index-BqPUBnbf.js";import"./index-CRapU7To.js";import"./index-B9GNlf0b.js";import"./messageSender-B2ap8g0-.js";const Se=J({name:"SmsProviderManagement",__name:"index",setup(s){const[t,o]=y({connectedComponent:W});function h(e){C(e)&&o.setData({providerId:e.id}),o.open()}const[p,f]=y({connectedComponent:Z});function _(e){C(e)&&f.setData({providerId:e.id}),f.open()}const[c,a]=y({connectedComponent:G}),r=K(!1),L={checkboxChange(e){r.value=e.$table.getCheckboxRecords().length>0},checkboxAll(e){r.value=e.$table.getCheckboxRecords().length>0}},w={collapsed:!1,schema:[...q.schema],showCollapseButton:!0,submitOnEnter:!1},B={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...j.columns,{title:i("common.action"),fixed:"right",field:"action",slots:{default:({row:e})=>Q(z,{actions:[{type:"link",icon:"clarity:note-edit-line",tooltip:i("common.edit"),onClick:x.bind(null,e)},{type:"link",icon:"ic:round-library-books",tooltip:i("mcms.smsLog.smsLogList"),onClick:_.bind(null,e)},{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:i("common.delete"),popConfirm:{title:i("common.deleteConfirm"),placement:"left",confirm:v.bind(null,[e.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(A,ve)=>g(this,[A,ve],function*({page:e},d){return(yield N($({page:e.currentPage,pageSize:e.pageSize},d))).data})}}},[P,u]=E({formOptions:w,gridOptions:B,gridEvents:L});function x(e){C(e)?a.setData({record:e,isUpdate:!0,gridApi:u}):a.setData({record:null,isUpdate:!1,gridApi:u}),a.open()}function V(){U.confirm({title:i("common.deleteConfirm"),onOk(){return g(this,null,function*(){const d=u.grid.getCheckboxRecords().map(A=>A.id);v(d)})}})}function v(e){return g(this,null,function*(){(yield I({ids:e})).code===0&&(yield u.reload(),r.value=!1)})}return(e,d)=>(Y(),X(n(H),{"auto-content-height":""},{default:m(()=>[l(n(c)),l(n(p)),l(n(t)),l(n(P),null,{"toolbar-buttons":m(()=>[ee(l(n(b),{danger:"",type:"primary",onClick:V},{default:m(()=>[k(S(n(i)("common.delete")),1)]),_:1},512),[[T,r.value]])]),"toolbar-tools":m(()=>[l(n(b),{type:"primary",onClick:h},{default:m(()=>[k(S(n(i)("mcms.sms.sendSms")),1)]),_:1}),l(n(b),{class:"ml-4",type:"primary",onClick:x},{default:m(()=>[k(S(n(i)("mcms.smsProvider.addSmsProvider")),1)]),_:1})]),_:1})]),_:1}))}});export{Se as default};
