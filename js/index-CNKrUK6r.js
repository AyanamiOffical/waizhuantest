var w=Object.defineProperty;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var b=(o,e,t)=>e in o?w(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,k=(o,e)=>{for(var t in e||(e={}))y.call(e,t)&&b(o,t,e[t]);if(g)for(var t of g(e))T.call(e,t)&&b(o,t,e[t]);return o};var m=(o,e,t)=>new Promise((p,l)=>{var f=s=>{try{i(t.next(s))}catch(a){l(a)}},c=s=>{try{i(t.throw(s))}catch(a){l(a)}},i=s=>s.done?p(s.value):Promise.resolve(s.value).then(f,c);i((t=t.apply(o,e)).next())});import{ap as n,cf as D,aW as S,ch as v}from"./bootstrap-B-VSIAtm.js";import{_ as B,u as N}from"./TableAction.vue_vue_type_style_index_0_lang-CJC400sX.js";import{d as $,g as A}from"./token-DQ4ZCFTv.js";import"./form-CWWYCqXo.js";import{u as I}from"./token-nVVcVsK4.js";import{k as _,V as O,O as V,Z as R,_ as U,$ as h,x,U as u,ar as z,a5 as E,a6 as G}from"../jse/index-index-fT_vxJqM.js";import{s as d}from"./use-vben-form-m2hWlrgt.js";import M from"./index-BMZQRmWB.js";import{_ as j}from"./page.vue_vue_type_script_setup_true_lang-DTCuaPOc.js";import"./index-DrXurIMi.js";import"./index-D4GcylDq.js";import"./index-Bw1tMpvo.js";import"./render-content.vue_vue_type_script_lang-CD9tW6pI.js";const q={columns:[{type:"checkbox",width:60},{title:n("sys.login.username"),field:"username"},{title:"Token",field:"token"},{title:n("common.source"),field:"source"},{title:n("common.status"),field:"status",slots:{default:o=>_(M,{checked:o.row.status===1,onClick:()=>{const e=o.row.status===1?2:1;I({id:o.row.id,status:e}).then(()=>{o.row.status=e})}})}},{title:n("common.expiredAt"),field:"expiredAt",formatter:"formatDateTime"},{title:n("common.createTime"),field:"createdAt",formatter:"formatDateTime"}]},F={schema:[{fieldName:"username",label:n("sys.login.username"),component:"Input",rules:d().max(30).optional()},{fieldName:"nickname",label:n("sys.user.nickname"),component:"Input",rules:d().max(30).optional()},{fieldName:"email",label:n("sys.login.email"),component:"Input",rules:d().max(50).optional()},{fieldName:"uuid",label:"UUID",component:"Input",rules:d().max(30).optional()}]},se=O({name:"TokenManagement",__name:"index",setup(o){const e=V(!1),t={checkboxChange(a){e.value=a.$table.getCheckboxRecords().length>0},checkboxAll(a){e.value=a.$table.getCheckboxRecords().length>0}},p={collapsed:!1,schema:[...F.schema],showCollapseButton:!0,submitOnEnter:!1},l={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...q.columns,{title:n("common.action"),fixed:"right",field:"action",slots:{default:({row:a})=>_(B,{actions:[{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:n("common.delete"),popConfirm:{title:n("common.deleteConfirm"),placement:"left",confirm:s.bind(null,[a.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(C,le)=>m(this,[C,le],function*({page:a},r){return(yield A(k({page:a.currentPage,pageSize:a.pageSize},r))).data})}}},[f,c]=N({formOptions:p,gridOptions:l,gridEvents:t});function i(){v.confirm({title:n("common.deleteConfirm"),onOk(){return m(this,null,function*(){const r=c.grid.getCheckboxRecords().map(C=>C.id);s(r)})}})}function s(a){return m(this,null,function*(){(yield $({ids:a})).code===0&&(yield c.reload(),e.value=!1)})}return(a,r)=>(U(),R(u(j),{"auto-content-height":""},{default:h(()=>[x(u(f),null,{"toolbar-buttons":h(()=>[z(x(u(D),{danger:"",type:"primary",onClick:i},{default:h(()=>[E(G(u(n)("common.delete")),1)]),_:1},512),[[S,e.value]])]),_:1})]),_:1}))}});export{se as default};
