import{e as ne,a0 as ue,a as le,cI as fe,bU as ve,_ as b,o as ye,h as Q,b as D,p as ae,cJ as pe,cK as he,cL as be,Z as j,P as G,a2 as x,v as Ke,n as S,a3 as R,U as ce,cM as X,cN as me,cO as xe,cP as ke,cQ as Oe,cR as ge,cS as Ee}from"./bootstrap-BWmjjFp9.js";import{x as O,V as oe,O as E,J as h,ac as Ne,Q as M,p as Pe,n as Se}from"../jse/index-index-DuhpPpLg.js";const Y=4;function we(e){const{dropPosition:c,dropLevelOffset:o,prefixCls:l,indent:n,direction:u="ltr"}=e,d=u==="ltr"?"left":"right",s=u==="ltr"?"right":"left",v={[d]:`${-o*n+Y}px`,[s]:0};switch(c){case-1:v.top="-3px";break;case 1:v.bottom="-3px";break;default:v.bottom="-3px",v[d]=`${n+Y}px`;break}return O("div",{style:v,class:`${l}-drop-indicator`},null)}const re=()=>{const e=be();return b(b({},e),{showLine:R([Boolean,Object]),multiple:x(),autoExpandParent:x(),checkStrictly:x(),checkable:x(),disabled:x(),defaultExpandAll:x(),defaultExpandParent:x(),defaultExpandedKeys:S(),expandedKeys:S(),checkedKeys:R([Array,Object]),defaultCheckedKeys:S(),selectedKeys:S(),defaultSelectedKeys:S(),selectable:x(),loadedKeys:S(),draggable:x(),showIcon:x(),icon:j(),switcherIcon:G.any,prefixCls:String,replaceFields:Ke(),blockNode:x(),openAnimation:G.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":j(),"onUpdate:checkedKeys":j(),"onUpdate:expandedKeys":j()})},I=oe({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:ne(re(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:Object,setup(e,c){let{attrs:o,expose:l,emit:n,slots:u}=c;ue(!(e.treeData===void 0&&u.default));const{prefixCls:d,direction:s,virtual:v}=le("tree",e),[y,g]=fe(d),i=E();l({treeRef:i,onNodeExpand:function(){var a;(a=i.value)===null||a===void 0||a.onNodeExpand(...arguments)},scrollTo:a=>{var f;(f=i.value)===null||f===void 0||f.scrollTo(a)},selectedKeys:h(()=>{var a;return(a=i.value)===null||a===void 0?void 0:a.selectedKeys}),checkedKeys:h(()=>{var a;return(a=i.value)===null||a===void 0?void 0:a.checkedKeys}),halfCheckedKeys:h(()=>{var a;return(a=i.value)===null||a===void 0?void 0:a.halfCheckedKeys}),loadedKeys:h(()=>{var a;return(a=i.value)===null||a===void 0?void 0:a.loadedKeys}),loadingKeys:h(()=>{var a;return(a=i.value)===null||a===void 0?void 0:a.loadingKeys}),expandedKeys:h(()=>{var a;return(a=i.value)===null||a===void 0?void 0:a.expandedKeys})}),Ne(()=>{ve(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});const A=(a,f)=>{n("update:checkedKeys",a),n("check",a,f)},w=(a,f)=>{n("update:expandedKeys",a),n("expand",a,f)},N=(a,f)=>{n("update:selectedKeys",a),n("select",a,f)};return()=>{const{showIcon:a,showLine:f,switcherIcon:F=u.switcherIcon,icon:H=u.icon,blockNode:L,checkable:U,selectable:C,fieldNames:T=e.replaceFields,motion:V=e.openAnimation,itemHeight:t=28,onDoubleclick:r,onDblclick:p}=e,_=b(b(b({},o),ye(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:!!f,dropIndicatorRender:we,fieldNames:T,icon:H,itemHeight:t}),K=u.default?Q(u.default()):void 0;return y(O(he,D(D({},_),{},{virtual:v.value,motion:V,ref:i,prefixCls:d.value,class:ae({[`${d.value}-icon-hide`]:!a,[`${d.value}-block-node`]:L,[`${d.value}-unselectable`]:!C,[`${d.value}-rtl`]:s.value==="rtl"},o.class,g.value),direction:s.value,checkable:U,selectable:C,switcherIcon:P=>pe(d.value,F,P,u.leafIcon,f),onCheck:A,onExpand:w,onSelect:N,onDblclick:p||r,children:K}),b(b({},u),{checkable:()=>O("span",{class:`${d.value}-checkbox-inner`},null)})))}}});var Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function ee(e){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?Object(arguments[c]):{},l=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),l.forEach(function(n){_e(e,n,o[n])})}return e}function _e(e,c,o){return c in e?Object.defineProperty(e,c,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[c]=o,e}var W=function(c,o){var l=ee({},c,o.attrs);return O(ce,ee({},l,{icon:Te}),null)};W.displayName="FolderOpenOutlined";W.inheritAttrs=!1;var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function te(e){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?Object(arguments[c]):{},l=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(o).filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable}))),l.forEach(function(n){Ce(e,n,o[n])})}return e}function Ce(e,c,o){return c in e?Object.defineProperty(e,c,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[c]=o,e}var Z=function(c,o){var l=te({},c,o.attrs);return O(ce,te({},l,{icon:De}),null)};Z.displayName="FolderOutlined";Z.inheritAttrs=!1;var k;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(k||(k={}));function q(e,c,o){function l(n){const u=n[c.key],d=n[c.children];o(u,n)!==!1&&q(d||[],c,o)}e.forEach(l)}function $e(e){let{treeData:c,expandedKeys:o,startKey:l,endKey:n,fieldNames:u={title:"title",key:"key",children:"children"}}=e;const d=[];let s=k.None;if(l&&l===n)return[l];if(!l||!n)return[];function v(y){return y===l||y===n}return q(c,u,y=>{if(s===k.End)return!1;if(v(y)){if(d.push(y),s===k.None)s=k.Start;else if(s===k.Start)return s=k.End,!1}else s===k.Start&&d.push(y);return o.includes(y)}),d}function z(e,c,o){const l=[...c],n=[];return q(e,o,(u,d)=>{const s=l.indexOf(u);return s!==-1&&(n.push(d),l.splice(s,1)),!!l.length}),n}var je=function(e,c){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&c.indexOf(l)<0&&(o[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(e);n<l.length;n++)c.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(o[l[n]]=e[l[n]]);return o};const Ie=()=>b(b({},re()),{expandAction:R([Boolean,String])});function Ae(e){const{isLeaf:c,expanded:o}=e;return c?O(ge,null,null):o?O(W,null,null):O(Z,null,null)}const B=oe({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:ne(Ie(),{showIcon:!0,expandAction:"click"}),slots:Object,setup(e,c){let{attrs:o,slots:l,emit:n,expose:u}=c;var d;const s=E(e.treeData||X(Q((d=l.default)===null||d===void 0?void 0:d.call(l))));M(()=>e.treeData,()=>{s.value=e.treeData}),Pe(()=>{Se(()=>{var t;e.treeData===void 0&&l.default&&(s.value=X(Q((t=l.default)===null||t===void 0?void 0:t.call(l))))})});const v=E(),y=E(),g=h(()=>me(e.fieldNames)),i=E();u({scrollTo:t=>{var r;(r=i.value)===null||r===void 0||r.scrollTo(t)},selectedKeys:h(()=>{var t;return(t=i.value)===null||t===void 0?void 0:t.selectedKeys}),checkedKeys:h(()=>{var t;return(t=i.value)===null||t===void 0?void 0:t.checkedKeys}),halfCheckedKeys:h(()=>{var t;return(t=i.value)===null||t===void 0?void 0:t.halfCheckedKeys}),loadedKeys:h(()=>{var t;return(t=i.value)===null||t===void 0?void 0:t.loadedKeys}),loadingKeys:h(()=>{var t;return(t=i.value)===null||t===void 0?void 0:t.loadingKeys}),expandedKeys:h(()=>{var t;return(t=i.value)===null||t===void 0?void 0:t.expandedKeys})});const A=()=>{const{keyEntities:t}=ke(s.value,{fieldNames:g.value});let r;return e.defaultExpandAll?r=Object.keys(t):e.defaultExpandParent?r=Oe(e.expandedKeys||e.defaultExpandedKeys||[],t):r=e.expandedKeys||e.defaultExpandedKeys,r},w=E(e.selectedKeys||e.defaultSelectedKeys||[]),N=E(A());M(()=>e.selectedKeys,()=>{e.selectedKeys!==void 0&&(w.value=e.selectedKeys)},{immediate:!0}),M(()=>e.expandedKeys,()=>{e.expandedKeys!==void 0&&(N.value=e.expandedKeys)},{immediate:!0});const f=xe((t,r)=>{const{isLeaf:p}=r;p||t.shiftKey||t.metaKey||t.ctrlKey||i.value.onNodeExpand(t,r)},200,{leading:!0}),F=(t,r)=>{e.expandedKeys===void 0&&(N.value=t),n("update:expandedKeys",t),n("expand",t,r)},H=(t,r)=>{const{expandAction:p}=e;p==="click"&&f(t,r),n("click",t,r)},L=(t,r)=>{const{expandAction:p}=e;(p==="dblclick"||p==="doubleclick")&&f(t,r),n("doubleclick",t,r),n("dblclick",t,r)},U=(t,r)=>{const{multiple:p}=e,{node:_,nativeEvent:K}=r,P=_[g.value.key],$=b(b({},r),{selected:!0}),se=(K==null?void 0:K.ctrlKey)||(K==null?void 0:K.metaKey),ie=K==null?void 0:K.shiftKey;let m;p&&se?(m=t,v.value=P,y.value=m,$.selectedNodes=z(s.value,m,g.value)):p&&ie?(m=Array.from(new Set([...y.value||[],...$e({treeData:s.value,expandedKeys:N.value,startKey:P,endKey:v.value,fieldNames:g.value})])),$.selectedNodes=z(s.value,m,g.value)):(m=[P],v.value=P,y.value=m,$.selectedNodes=z(s.value,m,g.value)),n("update:selectedKeys",m),n("select",m,$),e.selectedKeys===void 0&&(w.value=m)},C=(t,r)=>{n("update:checkedKeys",t),n("check",t,r)},{prefixCls:T,direction:V}=le("tree",e);return()=>{const t=ae(`${T.value}-directory`,{[`${T.value}-directory-rtl`]:V.value==="rtl"},o.class),{icon:r=l.icon,blockNode:p=!0}=e,_=je(e,["icon","blockNode"]);return O(I,D(D(D({},o),{},{icon:r||Ae,ref:i,blockNode:p},_),{},{prefixCls:T.value,class:t,expandedKeys:N.value,selectedKeys:w.value,onSelect:U,onClick:H,onDblclick:L,onExpand:F,onCheck:C}),l)}}}),J=Ee,Le=b(I,{DirectoryTree:B,TreeNode:J,install:e=>(e.component(I.name,I),e.component(J.name,J),e.component(B.name,B),e)});export{Le as T};
