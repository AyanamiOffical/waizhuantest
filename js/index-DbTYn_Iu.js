var i=(b,p,c)=>new Promise((d,u)=>{var f=a=>{try{l(c.next(a))}catch(r){u(r)}},y=a=>{try{l(c.throw(a))}catch(r){u(r)}},l=a=>a.done?d(a.value):Promise.resolve(a.value).then(f,y);l((c=c.apply(b,p)).next())});import{ap as s,d6 as P,da as C,db as S,bp as _,dc as N,cf as k}from"./bootstrap-_LeX4-bm.js";import{V as F,bL as I,Y as v,Z as T,_ as V,$ as t,x as o,U as e,a5 as A,a6 as D}from"../jse/index-index-CCysr0kX.js";import{u as g}from"./form-ZuhkTVCu.js";import{s as m}from"./use-vben-form-BJ1BG10c.js";import{C as h}from"./index-qs3f0SXU.js";import{_ as U}from"./page.vue_vue_type_script_setup_true_lang-BrPzpsst.js";import{R as B,C as x}from"./index-0CYvrR3L.js";import"./index-CsuTNqdp.js";import"./render-content.vue_vue_type_script_lang-DcqsGKi2.js";const $={schema:[{fieldName:"avatar",label:s("sys.user.avatar"),component:"ImageUpload",componentProps:{accept:["png","jpeg","jpg"],maxSize:2,maxNumber:1,multiple:!1,provider:"cloud-default"}},{fieldName:"nickname",label:s("sys.user.nickname"),component:"Input",rules:m().max(40)},{fieldName:"mobile",label:s("sys.login.mobile"),component:"Input",rules:m().max(20).optional()},{fieldName:"email",label:s("sys.login.email"),component:"Input",rules:m().email()}]},j={schema:[{fieldName:"oldPassword",label:s("sys.user.oldPassword"),component:"Input",rules:m().max(40).min(6)},{fieldName:"newPassword",label:s("sys.user.newPassword"),component:"Input",rules:m().max(40).min(6)}]},J=F({__name:"index",setup(b){const p=P(),{copy:c}=I(),[d,u]=g({handleSubmit:a,schema:[...$.schema],showDefaultActions:!0,layout:"vertical"});v(()=>{f()});function f(){return i(this,null,function*(){const n=yield C();n.code===0&&u.setValues(n.data)})}const[y]=g({handleSubmit:l,schema:[...j.schema],showDefaultActions:!0,layout:"vertical"});function l(n){return i(this,null,function*(){(yield S(n)).code===0&&_.success(s("common.successful"))})}function a(n){return i(this,null,function*(){(yield N(n)).code===0&&_.success(s("common.successful"))})}function r(){c(p.accessToken),_.success(s("common.successful"))}return(n,w)=>(V(),T(e(U),null,{default:t(()=>[o(e(B),null,{default:t(()=>[o(e(x),{span:11},{default:t(()=>[o(e(h),{title:e(s)("sys.user.profile")},{default:t(()=>[o(e(d))]),_:1},8,["title"])]),_:1}),o(e(x),{offset:1,span:11},{default:t(()=>[o(e(h),{title:e(s)("sys.user.changePassword")},{default:t(()=>[o(e(y))]),_:1},8,["title"]),o(e(h),{title:e(s)("sys.sys.moreFeatures"),class:"mt-4"},{default:t(()=>[o(e(k),{type:"primary",onClick:r},{default:t(()=>[A(D(e(s)("sys.sys.copyToken")),1)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})]),_:1}))}});export{J as default};
