var A=Object.defineProperty;var E=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var D=(n,t,o)=>t in n?A(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,S=(n,t)=>{for(var o in t||(t={}))O.call(t,o)&&D(n,o,t[o]);if(E)for(var o of E(t))F.call(t,o)&&D(n,o,t[o]);return n};var g=(n,t,o)=>new Promise((h,p)=>{var f=a=>{try{c(o.next(a))}catch(s){p(s)}},_=a=>{try{c(o.throw(a))}catch(s){p(s)}},c=a=>a.done?h(a.value):Promise.resolve(a.value).then(f,_);c((o=o.apply(n,t)).next())});import{ap as l,cf as b,aW as R,ch as T}from"./bootstrap-DXVvTFoS.js";import{r as C}from"./chunk-BZNENX2T-BoCj3v1U.js";import{_ as U,u as z}from"./TableAction.vue_vue_type_style_index_0_lang-CJNs7Aso.js";import{t as G,b as I,s as N,g as j}from"./schemas-vJlqn5f0.js";import{_ as q}from"./email-log-modal.vue_vue_type_script_setup_true_lang-4lTjX6v7.js";import{_ as W}from"./form.vue_vue_type_script_setup_true_lang-DXrtSffl.js";import{_ as Z}from"./send-modal.vue_vue_type_script_setup_true_lang-Dq2Js-uJ.js";import{_ as H}from"./page.vue_vue_type_script_setup_true_lang-B-FBxrtp.js";import{V as J,O as K,k as Q,Z as X,_ as Y,$ as m,x as r,U as i,a5 as k,a6 as y,ar as ee}from"../jse/index-index-BpfZjsfB.js";import{u as x}from"./use-modal-DdHEjpwi.js";import"./index-BViELZQP.js";import"./form-BY5gWF-X.js";import"./use-vben-form-F13RO0jS.js";import"./render-content.vue_vue_type_script_lang-Dm6NPG3G.js";import"./index-BH_3AJJk.js";import"./index-CxJQESyl.js";import"./index-2RmDDPPU.js";import"./messageSender-E4MRPs_-.js";const ye=J({name:"EmailProviderManagement",__name:"index",setup(n){const[t,o]=x({connectedComponent:Z});function h(e){C(e)&&o.setData({providerId:e.id}),o.open()}const[p,f]=x({connectedComponent:q});function _(e){C(e)&&f.setData({providerId:e.id}),f.open()}const[c,a]=x({connectedComponent:W}),s=K(!1),$={checkboxChange(e){s.value=e.$table.getCheckboxRecords().length>0},checkboxAll(e){s.value=e.$table.getCheckboxRecords().length>0}},L={collapsed:!1,schema:[...N.schema],showCollapseButton:!0,submitOnEnter:!1},w={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...G.columns,{title:l("common.action"),fixed:"right",field:"action",slots:{default:({row:e})=>Q(U,{actions:[{type:"link",icon:"clarity:note-edit-line",tooltip:l("common.edit"),onClick:v.bind(null,e)},{type:"link",icon:"ic:round-library-books",tooltip:l("mcms.emailLog.emailLogList"),onClick:_.bind(null,e)},{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:l("common.delete"),popConfirm:{title:l("common.deleteConfirm"),placement:"left",confirm:M.bind(null,[e.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{},proxyConfig:{ajax:{query:(V,Me)=>g(this,[V,Me],function*({page:e},d){return(yield j(S({page:e.currentPage,pageSize:e.pageSize},d))).data})}}},[B,u]=z({formOptions:L,gridOptions:w,gridEvents:$});function v(e){C(e)?a.setData({record:e,isUpdate:!0,gridApi:u}):a.setData({record:null,isUpdate:!1,gridApi:u}),a.open()}function P(){T.confirm({title:l("common.deleteConfirm"),onOk(){return g(this,null,function*(){const d=u.grid.getCheckboxRecords().map(V=>V.id);M(d)})}})}function M(e){return g(this,null,function*(){(yield I({ids:e})).code===0&&(yield u.reload(),s.value=!1)})}return(e,d)=>(Y(),X(i(H),{"auto-content-height":""},{default:m(()=>[r(i(c)),r(i(p)),r(i(t)),r(i(B),null,{"toolbar-buttons":m(()=>[ee(r(i(b),{danger:"",type:"primary",onClick:P},{default:m(()=>[k(y(i(l)("common.delete")),1)]),_:1},512),[[R,s.value]])]),"toolbar-tools":m(()=>[r(i(b),{type:"primary",onClick:h},{default:m(()=>[k(y(i(l)("mcms.email.sendEmail")),1)]),_:1}),r(i(b),{class:"ml-4",type:"primary",onClick:v},{default:m(()=>[k(y(i(l)("mcms.emailProvider.addEmailProvider")),1)]),_:1})]),_:1})]),_:1}))}});export{ye as default};
