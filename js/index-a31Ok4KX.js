var $=Object.defineProperty;var C=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var k=(n,t,e)=>t in n?$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,x=(n,t)=>{for(var e in t||(t={}))B.call(t,e)&&k(n,e,t[e]);if(C)for(var e of C(t))M.call(t,e)&&k(n,e,t[e]);return n};var f=(n,t,e)=>new Promise((s,d)=>{var h=a=>{try{c(e.next(a))}catch(l){d(l)}},g=a=>{try{c(e.throw(a))}catch(l){d(l)}},c=a=>a.done?s(a.value):Promise.resolve(a.value).then(h,g);c((e=e.apply(n,t)).next())});import{ap as r,cf as y,aW as V,ch as F}from"./bootstrap-_LeX4-bm.js";import{r as O}from"./chunk-BZNENX2T-BoCj3v1U.js";import{_ as S,u as A}from"./TableAction.vue_vue_type_style_index_0_lang-CsfVJIMM.js";import{d as R,g as U}from"./department-aLx-h6vd.js";import{_ as E,t as G,s as N}from"./form.vue_vue_type_script_setup_true_lang-CngLSkOT.js";import{_ as j}from"./page.vue_vue_type_script_setup_true_lang-BrPzpsst.js";import{V as q,O as z,k as I,Z as L,_ as T,$ as p,x as u,U as i,a5 as D,a6 as w,ar as W}from"../jse/index-index-CCysr0kX.js";import{u as Z}from"./use-modal-OeyNsIFo.js";import"./index-CsuTNqdp.js";import"./form-ZuhkTVCu.js";import"./use-vben-form-BJ1BG10c.js";import"./render-content.vue_vue_type_script_lang-DcqsGKi2.js";import"./index-BaWU5ccD.js";import"./index-C_t4d1EK.js";import"./index-BA5-Djs4.js";import"./common-Bjr5QI1d.js";const me=q({name:"DepartmentManagement",__name:"index",setup(n){const[t,e]=Z({connectedComponent:E}),s=z(!1),d={checkboxChange(o){s.value=o.$table.getCheckboxRecords().length>0},checkboxAll(o){s.value=o.$table.getCheckboxRecords().length>0}},h={collapsed:!1,schema:[...N.schema],showCollapseButton:!0,submitOnEnter:!1},g={checkboxConfig:{highlight:!0},toolbarConfig:{slots:{buttons:"toolbar-buttons"}},columns:[...G.columns,{title:r("common.action"),fixed:"right",field:"action",slots:{default:({row:o})=>I(S,{actions:[{type:"link",icon:"clarity:note-edit-line",tooltip:r("common.edit"),onClick:l.bind(null,o)},{icon:"ant-design:delete-outlined",type:"link",color:"error",tooltip:r("common.delete"),popConfirm:{title:r("common.deleteConfirm"),placement:"left",confirm:b.bind(null,[o.id])}}]})}}],height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:(o,m)=>f(this,null,function*(){return(yield U(x({page:1,pageSize:1e4},m))).data})}},treeConfig:{transform:!0,parentField:"parentId",rowField:"id"}},[c,a]=A({formOptions:h,gridOptions:g,gridEvents:d});function l(o){O(o)?e.setData({record:o,isUpdate:!0,gridApi:a}):e.setData({record:null,isUpdate:!1,gridApi:a}),e.open()}function v(){F.confirm({title:r("common.deleteConfirm"),onOk(){return f(this,null,function*(){const m=a.grid.getCheckboxRecords().map(_=>_.id);b(m)})}})}function b(o){return f(this,null,function*(){(yield R({ids:o})).code===0&&(yield a.reload(),s.value=!1)})}return(o,m)=>(T(),L(i(j),{"auto-content-height":""},{default:p(()=>[u(i(t)),u(i(c),null,{"toolbar-buttons":p(()=>[W(u(i(y),{danger:"",type:"primary",onClick:v},{default:p(()=>[D(w(i(r)("common.delete")),1)]),_:1},512),[[V,s.value]])]),"toolbar-tools":p(()=>[u(i(y),{type:"primary",onClick:l},{default:p(()=>[D(w(i(r)("sys.department.addDepartment")),1)]),_:1})]),_:1})]),_:1}))}});export{me as default};
